# Storage

Porto comes pre-configured with a storage layer suited for both browser and non-browser environments.

By default, Porto uses [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) in browser environments and an in-memory KV store in non-browser environments.

## Storage Backends

| Storage | Underlying | Default |
| --------------- | ----------- | ------- |
| `Storage.idb` | [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) | in browser environments |
| `Storage.cookie` | [Cookie](https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie) | |
| `Storage.localStorage` | [localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage) | |
| `Storage.memory` | JavaScript [`Map`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map) | in non-browser environments |

## Usage

### `Storage.idb`

```ts twoslash
import { Porto, Storage } from 'porto'

const porto = Porto.create({
  storage: Storage.idb() // default storage in browser environments
})
```

### `Storage.cookie`

```ts twoslash
import { Porto, Storage } from 'porto'

const porto = Porto.create({
  storage: Storage.cookie()
})
```

### `Storage.localStorage`

```ts twoslash
import { Porto, Storage } from 'porto'

const porto = Porto.create({
  storage: Storage.localStorage()
})
```

### `Storage.memory`

```ts twoslash
import { Porto, Storage } from 'porto'

const porto = Porto.create({
  storage: Storage.memory() // default storage in non-browser environments
})
```

### Combining multiple storage options

```ts twoslash
import { Porto, Storage } from 'porto'

const porto = Porto.create({
  storage: Storage.combine(Storage.cookie(), Storage.localStorage())
})
```
